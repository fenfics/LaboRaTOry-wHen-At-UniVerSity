import javax.swing.*;
import java.awt.event.*;
import java.util.Stack;
import java.awt.*;

public class Calculator extends JFrame implements ActionListener {
    Stack<Integer> s1 = new Stack<>();
    JButton[] buttons;
    String[] cal = { "C", "%", "/", "*", "7", "8", "9", " x ", "4", "5", "6", " - ", "1", "2", "3", " + ", "+/-", "0",
            ".", "=" };
    JPanel buttonPanel;
    JPanel numPanel;
    JTextField displayTextField;

    public Calculator() {
        super("Calculator");

        getContentPane().add(setBottonPanel());
        getContentPane().add(setNumPanel(), BorderLayout.NORTH);
        setSize(350, 400);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        new Calculator();
    }

    private JPanel setBottonPanel() { // ปุ่มเลข
        if (buttonPanel == null) {
            buttonPanel = new JPanel();
            buttonPanel.setLayout(new GridLayout(5, 4, 6, 5));
            buttons = new JButton[25];
            for (int i = 0; i < cal.length; i++) {
                buttons[i] = new JButton(cal[i]);
                buttonPanel.add(buttons[i]);
                buttons[i].addActionListener(this);
                buttons[i].setFont(new Font("Bold", Font.PLAIN, 20));
            }
        }
        return buttonPanel;
    }

    private JPanel setNumPanel() { // ปุ่มรับค่า
        if (numPanel == null) {
            numPanel = new JPanel();
            displayTextField = new JTextField("0");
            displayTextField.setHorizontalAlignment(JTextField.RIGHT);
            displayTextField.setFont(new Font("Bold", Font.PLAIN, 35));
            numPanel.setLayout(new BorderLayout());
            numPanel.add(displayTextField);
        }
        return numPanel;
    }

    public void actionPerformed(ActionEvent e) {
        JButton button = (JButton) e.getSource();
        s1.push(Integer.parseInt(button.getText())); // Convert button text to integer and push to stack
        displayTextField.setText(displayTextField.getText() + button.getText());
    
        if (button.getText().equals("+")) {
            if (s1.size() >= 2) {
                int num2 = s1.pop();
                int num1 = s1.pop();
                int sum = num1 + num2;
                s1.push(sum); // Push result back to stack
                displayTextField.setText(String.valueOf(sum)); // Display the result
            }
        }
    }

}
